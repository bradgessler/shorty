%form#shortener{:method=>'post',:action=>'/'}
  %input{:type=>'hidden',:name=>'_method',:value=>'put'}
  ="http://#{@env['HTTP_HOST']}/"
  %input#key.faux{:type=>'text',:name=>'key',:value=>@url.key,:tabindex=>2,:size=>8}>
  &#10132;
  %input#url{:type=>'text',:name=>'url',:value=>@url.url,:tabindex=>1,:size=>35}
  %input#shorten{:type=>'submit',:value=>'Shorten',:tabindex=>3}
#status
:javascript
  (function(){
    $('#shortener').submit(function(){
      $.shorty($('#url').val(), $('#key').val(), {
        success: function(url){
          alert('Created ' + url);
        },
        error: function(error){
          alert(error);
        }
      });
      return false;
    });
  })();
  // Replace me with some magical jQuery that makes this thing work!